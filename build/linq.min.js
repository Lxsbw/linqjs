"use strict";class Linq{constructor(t){this._elements=t=void 0===t?[]:t,this.add=this.Add,this.append=this.Append,this.prepend=this.Prepend,this.addRange=this.AddRange,this.aggregate=this.Aggregate,this.all=this.All,this.any=this.Any,this.average=this.Average,this.cast=this.Cast,this.clear=this.Clear,this.concat=this.Concat,this.contains=this.Contains,this.count=this.Count,this.defaultIfEmpty=this.DefaultIfEmpty,this.distinct=this.Distinct,this.distinctBy=this.DistinctBy,this.distinctMap=this.DistinctMap,this.elementAt=this.ElementAt,this.elementAtOrDefault=this.ElementAtOrDefault,this.except=this.Except,this.first=this.First,this.firstOrDefault=this.FirstOrDefault,this.forEach=this.ForEach,this.groupBy=this.GroupBy,this.groupJoin=this.GroupJoin,this.indexOf=this.IndexOf,this.insert=this.Insert,this.intersect=this.Intersect,this.join=this.Join,this.last=this.Last,this.lastOrDefault=this.LastOrDefault,this.max=this.Max,this.min=this.Min,this.ofType=this.OfType,this.orderBy=this.OrderBy,this.orderByDescending=this.OrderByDescending,this.thenBy=this.ThenBy,this.thenByDescending=this.ThenByDescending,this.remove=this.Remove,this.removeAll=this.RemoveAll,this.removeAt=this.RemoveAt,this.reverse=this.Reverse,this.select=this.Select,this.selectMany=this.SelectMany,this.sequenceEqual=this.SequenceEqual,this.single=this.Single,this.singleOrDefault=this.SingleOrDefault,this.skip=this.Skip,this.skipLast=this.SkipLast,this.skipWhile=this.SkipWhile,this.sum=this.Sum,this.take=this.Take,this.takeLast=this.TakeLast,this.takeWhile=this.TakeWhile,this.toArray=this.ToArray,this.toDictionary=this.ToDictionary,this.toList=this.ToList,this.toLookup=this.ToLookup,this.union=this.Union,this.where=this.Where,this.zip=this.Zip}Add(t){this._elements.push(t)}Append(t){this.Add(t)}Prepend(t){this._elements.unshift(t)}AddRange(t){var e;(e=this._elements).push.apply(e,t)}Aggregate(t,e){return this._elements.reduce(t,e)}All(t){return this._elements.every(t)}Any(t){return t?this._elements.some(t):0<this._elements.length}Average(t){return tools.calcNumDiv(this.Sum(t),this.Count())}Cast(){return new Linq(this._elements)}Clear(){this._elements.length=0}Concat(t){return new Linq(this._elements.concat(t.ToArray()))}Contains(e){return this.Any(function(t){return t===e})}Count(t){return t?this.Where(t).Count():this._elements.length}DefaultIfEmpty(t){return this.Count()?this:new Linq([t])}Distinct(){return this.Where(function(e,t,n){return(tools.isObj(e)?n.findIndex(function(t){return tools.equal(t,e)}):n.indexOf(e))===t})}DistinctBy(t){var i=this.GroupBy(t);return new Linq(i).Select(t=>t.key).ToArray().reduce(function(t,e){var n=new Linq(i).FirstOrDefault(t=>tools.equal(t.key,e));return t.Add(n.elements[0]),t},new Linq)}DistinctMap(t){return(t?this.Select(t):this).Distinct()}ElementAt(t){if(t<this.Count()&&0<=t)return this._elements[t];throw new Error("ArgumentOutOfRangeException: index is less than 0 or greater than or equal to the number of elements in source.")}ElementAtOrDefault(t){return t<this.Count()&&0<=t?this._elements[t]:void 0}Except(e){return this.Where(function(t){return!e.Contains(t)})}First(t){if(this.Count())return t?this.Where(t).First():this._elements[0];throw new Error("InvalidOperationException: The source sequence is empty.")}FirstOrDefault(t){return this.Count(t)?this.First(t):void 0}ForEach(t){return this._elements.forEach(t)}GroupBy(r,s){void 0===s&&(s=function(t){return t});return this.Aggregate(function(t,e){var n=r(e),i=new Linq(t).FirstOrDefault(t=>tools.equal(t.key,n)),e=s(e);return i?(i.elements.push(e),i.count++):t.push({key:n,count:1,elements:[e]}),t},[])}GroupJoin(t,n,i,r){return this.Select(function(e){return r(e,t.Where(function(t){return n(e)===i(t)}))})}IndexOf(t){return this._elements.indexOf(t)}Insert(t,e){if(t<0||t>this._elements.length)throw new Error("Index is out of range.");this._elements.splice(t,0,e)}Intersect(e){return this.Where(function(t){return e.Contains(t)})}Join(t,n,i,r){var s;return s=function(e){return t.Where(function(t){return i(t)===n(e)}).Select(function(t){return r(e,t)})},this.Aggregate((t,e,n)=>(t.AddRange(this.Select(s).ElementAt(n).ToArray()),t),new Linq)}Last(t){if(this.Count())return t?this.Where(t).Last():this._elements[this.Count()-1];throw Error("InvalidOperationException: The source sequence is empty.")}LastOrDefault(t){return this.Count(t)?this.Last(t):void 0}Max(t){return Math.max.apply(Math,this._elements.map(t||function(t){return t}))}Min(t){return Math.min.apply(Math,this._elements.map(t||function(t){return t}))}OfType(e){var n;switch(e){case Number:n="number";break;case String:n="string";break;case Boolean:n=typeof!0;break;case Function:n="function";break;default:n=null}return(null===n?this.Where(function(t){return t instanceof e}):this.Where(function(t){return typeof t===n})).Cast()}OrderBy(t,e){return void 0===e&&(e=tools.keyComparer(t,!1)),new OrderedList(tools.cloneDeep(this._elements),e)}OrderByDescending(t,e){return void 0===e&&(e=tools.keyComparer(t,!0)),new OrderedList(tools.cloneDeep(this._elements),e)}ThenBy(t){return this.OrderBy(t)}ThenByDescending(t){return this.OrderByDescending(t)}Remove(t){return-1!==this.IndexOf(t)&&(this.RemoveAt(this.IndexOf(t)),!0)}RemoveAll(t){return this.Where(tools.negate(t))}RemoveAt(t){this._elements.splice(t,1)}Reverse(){return new Linq(this._elements.reverse())}Select(t){return new Linq(this._elements.map(t))}SelectMany(i){var r=this;return this.Aggregate(function(t,e,n){return t.AddRange(r.Select(i).ElementAt(n).ToArray()),t},new Linq)}SequenceEqual(e){return this.All(function(t){return e.Contains(t)})}Single(t){if(1!==this.Count(t))throw new Error("The collection does not contain exactly one element.");return this.First(t)}SingleOrDefault(t){return this.Count(t)?this.Single(t):void 0}Skip(t){return new Linq(this._elements.slice(Math.max(0,t)))}SkipLast(t){return new Linq(this._elements.slice(0,-Math.max(0,t)))}SkipWhile(e){var n=this;return this.Skip(this.Aggregate(function(t){return e(n.ElementAt(t))?++t:t},0))}Sum(t){return t?this.Select(t).Sum():this.Aggregate(function(t,e){return tools.calcNum(t,+e)},0)}Take(t){return new Linq(this._elements.slice(0,Math.max(0,t)))}TakeLast(t){return new Linq(this._elements.slice(-Math.max(0,t)))}TakeWhile(e){var n=this;return this.Take(this.Aggregate(function(t){return e(n.ElementAt(t))?++t:t},0))}ToArray(){return this._elements}ToDictionary(i,r){var s=this;return this.Aggregate(function(t,e,n){return t[s.Select(i).ElementAt(n).toString()]=r?s.Select(r).ElementAt(n):e,t.Add({Key:s.Select(i).ElementAt(n),Value:r?s.Select(r).ElementAt(n):e}),t},new Linq)}ToList(){return this}ToLookup(t,e){return this.GroupBy(t,e)}Union(t){return this.Concat(t).Distinct()}Where(t){return new Linq(this._elements.filter(t))}Zip(n,i){var r=this;return n.Count()<this.Count()?n.Select(function(t,e){return i(r.ElementAt(e),t)}):this.Select(function(t,e){return i(t,n.ElementAt(e))})}}class OrderedList extends Linq{constructor(t,e){super(t),this._comparer=e,this._elements.sort(this._comparer)}ThenBy(t){return new OrderedList(this._elements,tools.composeComparers(this._comparer,tools.keyComparer(t,!1)))}ThenByDescending(t){return new OrderedList(this._elements,tools.composeComparers(this._comparer,tools.keyComparer(t,!0)))}}const tools={isObj(t){return!!t&&"object"==typeof t},equal(t,n){return t===n||typeof t==typeof n&&(t instanceof Object?Object.entries(t).every(t=>{var e=t[0],t=t[1];return this.isObj(t)?this.equal(n[e],t):n[e]===t}):t===n)},negate(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!n.apply(void 0,t)}},composeComparers(n,i){return function(t,e){return n(t,e)||i(t,e)}},keyComparer(r,s){return function(t,e){var n,i,t=r(t),e=r(e);return tools.isString(t)&&tools.isString(e)?(i=e,0<(n=t).localeCompare(i)?s?-1:1:0<i.localeCompare(n)?s?1:-1:0):(i=e)<(n=t)?s?-1:1:n<i?s?1:-1:0}},calcNum(t,e){var n,i;return this.isNum(t)&&this.isNum(e)?({mult:n,place:i}=this.calcMultiple(t,e),Number(((t*n+e*n)/n).toFixed(i))):0},calcNumDiv(t,e){return t/e},isNum(t){return"number"==typeof t&&!isNaN(t)},isString(t){return"string"==typeof t&&t.constructor===String},calcMultiple(t,e){t=t.toString().split("."),e=e.toString().split("."),t=1<t.length?t[1].length:0,e=1<e.length?e[1].length:0;return{mult:Math.pow(10,Math.max(t,e)),place:e<=t?t:e}},cloneDeep(t){let e;if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof RegExp)return e=t;if(t instanceof Array){for(var n in e=[],t)e.push(this.cloneDeep(t[n]));return e}if(t instanceof Object){for(var i in e={},t)t.hasOwnProperty(i)&&(e[i]=this.cloneDeep(t[i]));return e}throw new Error("Unable to copy param! Its type isn't supported.")}};"undefined"!=typeof module&&void 0!==module.exports?module.exports=Linq:window.Linq=Linq;