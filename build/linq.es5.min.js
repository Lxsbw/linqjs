Object.defineProperty(exports,"__esModule",{value:!0});var Linq=(()=>{function u(t,e){void 0===e&&(e=null),this._elements=t=void 0===t?[]:t,this._locales=e}return u.prototype[Symbol.iterator]=function(){var e,n,r,o;return collGenerator(this,function(t){switch(t.label){case 0:t.trys.push([0,5,6,7]),e=collValues(this._elements),n=e.next(),t.label=1;case 1:return n.done?[3,4]:[4,n.value];case 2:t.sent(),t.label=3;case 3:return n=e.next(),[3,1];case 4:return[3,7];case 5:return r=t.sent(),r={error:r},[3,7];case 6:try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(r)throw r.error}return[7];case 7:return[2]}})},Object.defineProperty(u.prototype,Symbol.toStringTag,{get:function(){return"Linq"},enumerable:!1,configurable:!0}),u.prototype.add=function(t){this._elements.push(t)},u.prototype.append=function(t){this.add(t)},u.prototype.prepend=function(t){this._elements.unshift(t)},u.prototype.addRange=function(t){var e;(e=this._elements).push.apply(e,t)},u.prototype.aggregate=function(t,e){return this._elements.reduce(t,e)},u.prototype.all=function(t){return this._elements.every(t)},u.prototype.any=function(t){return t?this._elements.some(t):0<this._elements.length},u.prototype.average=function(t){return Tools.calcNumDiv(this.sum(t),this.count())},u.prototype.cast=function(){return new u(this._elements)},u.prototype.clear=function(){this._elements.length=0},u.prototype.concat=function(t){return new u(this._elements.concat(t.toArray()))},u.prototype.contains=function(e){return this.any(function(t){return t===e})},u.prototype.count=function(t){return t?this.where(t).count():this._elements.length},u.prototype.defaultIfEmpty=function(t){return this.count()?this:new u([t])},u.prototype.distinct=function(){return this.where(function(e,t,n){return(Tools.isObject(e)?n.findIndex(function(t){return Tools.equal(t,e)}):n.indexOf(e))===t})},u.prototype.distinctBy=function(t){var r=this.groupBy(t);return new u(r).select(function(t){return t.key}).toArray().reduce(function(t,e){var n=new u(r).firstOrDefault(function(t){return Tools.equal(t.key,e)});return t.add(n.elements[0]),t},new u)},u.prototype.distinctMap=function(t){return(t?this.select(t):this).distinct()},u.prototype.elementAt=function(t){if(t<this.count()&&0<=t)return this._elements[t];throw new Error("ArgumentOutOfRangeException: index is less than 0 or greater than or equal to the number of elements in source.")},u.prototype.elementAtOrDefault=function(t){return t<this.count()&&0<=t?this._elements[t]:null},u.prototype.except=function(e){return this.where(function(t){return!e.contains(t)})},u.prototype.first=function(t){if(this.count())return t?this.where(t).first():this._elements[0];throw new Error("InvalidOperationException: The source sequence is empty.")},u.prototype.firstOrDefault=function(t){return this.count(t)?this.first(t):void 0},u.prototype.forEach=function(t){return this._elements.forEach(t)},u.prototype.groupBy=function(t,e){void 0===e&&(e=function(t){return t});for(var n=new Map,r=0,o=this._elements;r<o.length;r++){var i=o[r],u=Tools.getHash(t(i)),s=e(i),i=(n.has(u)||n.set(u,{key:t(i),count:0,elements:[]}),n.get(u));i.elements.push(s),i.count++}return Array.from(n.values())},u.prototype.groupByMini=function(o,i){void 0===i&&(i=function(t){return t});return this.aggregate(function(t,e){var n=o(e),r=new u(t).firstOrDefault(function(t){return Tools.equal(t.key,n)}),e=i(e);return r?(r.elements.push(e),r.count++):t.push({key:n,count:1,elements:[e]}),t},[])},u.prototype.groupJoin=function(t,n,r,o){return this.select(function(e){return o(e,t.where(function(t){return n(e)===r(t)}))})},u.prototype.indexOf=function(t){return this._elements.indexOf(t)},u.prototype.insert=function(t,e){if(t<0||t>this._elements.length)throw new Error("Index is out of range.");this._elements.splice(t,0,e)},u.prototype.intersect=function(e){return this.where(function(t){return e.contains(t)})},u.prototype.join=function(t,n,r,o){return this.selectMany(function(e){return t.where(function(t){return r(t)===n(e)}).select(function(t){return o(e,t)})})},u.prototype.last=function(t){if(this.count())return t?this.where(t).last():this._elements[this.count()-1];throw Error("InvalidOperationException: The source sequence is empty.")},u.prototype.lastOrDefault=function(t){return this.count(t)?this.last(t):void 0},u.prototype.max=function(t){return Math.max.apply(Math,this._elements.map(t||function(t){return t}))},u.prototype.min=function(t){return Math.min.apply(Math,this._elements.map(t||function(t){return t}))},u.prototype.ofType=function(e){var n;switch(e){case Number:n="number";break;case String:n="string";break;case Boolean:n=typeof!0;break;case Function:n="function";break;default:n=null}return(null===n?this.where(function(t){return t instanceof e}):this.where(function(t){return typeof t===n})).cast()},u.prototype.orderBy=function(t,e){return void 0===e&&(e=Tools.keyComparer(t,!1,this._locales)),new OrderedList(Tools.arrayMap(this._elements),e,this._locales)},u.prototype.orderByDescending=function(t,e){return void 0===e&&(e=Tools.keyComparer(t,!0,this._locales)),new OrderedList(Tools.arrayMap(this._elements),e,this._locales)},u.prototype.thenBy=function(t){return this.orderBy(t)},u.prototype.thenByDescending=function(t){return this.orderByDescending(t)},u.prototype.remove=function(t){return-1!==this.indexOf(t)&&(this.removeAt(this.indexOf(t)),!0)},u.prototype.removeAll=function(t){return this.where(Tools.negate(t))},u.prototype.removeAt=function(t){this._elements.splice(t,1)},u.prototype.reverse=function(){return new u(this._elements.reverse())},u.prototype.select=function(t){return new u(this._elements.map(t))},u.prototype.selectMany=function(r){var o=this;return this.aggregate(function(t,e,n){return t.addRange(o.select(r).elementAt(n).toArray()),t},new u)},u.prototype.sequenceEqual=function(e){return this.all(function(t){return e.contains(t)})},u.prototype.single=function(t){if(1!==this.count(t))throw new Error("The collection does not contain exactly one element.");return this.first(t)},u.prototype.singleOrDefault=function(t){return this.count(t)?this.single(t):void 0},u.prototype.skip=function(t){return new u(this._elements.slice(Math.max(0,t)))},u.prototype.skipLast=function(t){return new u(this._elements.slice(0,-Math.max(0,t)))},u.prototype.skipWhile=function(e){var n=this;return this.skip(this.aggregate(function(t){return e(n.elementAt(t))?++t:t},0))},u.prototype.sum=function(t){return t?this.select(t).sum():this.aggregate(function(t,e){return Tools.calcNum(t,+e)},0)},u.prototype.take=function(t){return new u(this._elements.slice(0,Math.max(0,t)))},u.prototype.takeLast=function(t){return new u(this._elements.slice(-Math.max(0,t)))},u.prototype.takeWhile=function(e){var n=this;return this.take(this.aggregate(function(t){return e(n.elementAt(t))?++t:t},0))},u.prototype.toArray=function(){return this._elements},u.prototype.toDictionary=function(r,o){var i=this;return this.aggregate(function(t,e,n){return t.add({Key:i.select(r).elementAt(n),Value:o?i.select(o).elementAt(n):e}),t},new u)},u.prototype.toList=function(){return this},u.prototype.toLookup=function(t,e){return this.groupBy(t,e)},u.prototype.union=function(t){return this.concat(t).distinct()},u.prototype.where=function(t){return new u(this._elements.filter(t))},u.prototype.zip=function(n,r){var o=this;return n.count()<this.count()?n.select(function(t,e){return r(o.elementAt(e),t)}):this.select(function(t,e){return r(t,n.elementAt(e))})},u.prototype.cloneDeep=function(t){return Tools.cloneDeep(t)},u})(),OrderedList=(r=>{function e(t,e,n){t=r.call(this,t,n)||this;return t._comparer=e,Tools.isArray(t._elements)&&t._elements.sort(t._comparer),t}return((e.prototype=Object.create(r.prototype)).constructor=e).prototype.thenBy=function(t){return new e(this._elements,Tools.composeComparers(this._comparer,Tools.keyComparer(t,!1,this._locales)),this._locales)},e.prototype.thenByDescending=function(t){return new e(this._elements,Tools.composeComparers(this._comparer,Tools.keyComparer(t,!0,this._locales)),this._locales)},e})(Linq),collGenerator=this&&this.collGenerator||function(r,o){var i,u,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=t(0),a.throw=t(1),a.return=t(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function t(n){return function(t){var e=[n,t];if(i)throw new TypeError("Generator is already executing.");for(;c=a&&e[a=0]?0:c;)try{if(i=1,u&&(s=2&e[0]?u.return:e[0]?u.throw||((s=u.return)&&s.call(u),0):u.next)&&!(s=s.call(u,e[1])).done)return s;switch(u=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,u=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))c.label=e[1];else if(6===e[0]&&c.label<s[1])c.label=s[1],s=e;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(e)}}e=o.call(r,c)}catch(t){e=[6,t],u=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},collValues=this&&this.collValues||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tools=(()=>{function c(){}return c.isObject=function(t){return!!t&&"object"==typeof t},c.equal=function(t,e){var n,r,o;return t===e||typeof t==typeof e&&(c.isObject(t)&&c.isObject(e)?(n=[t,e].map(function(t){return t.constructor}))[0]===n[1]&&(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():t instanceof RegExp&&e instanceof RegExp?t.toString()===e.toString():(n=Object.entries(t),r=Object.entries(e),n.length===r.length&&(o=function(t,n){return t.every(function(t){var e=t[0],t=t[1];return c.isObject(t)?c.equal(n[e],t):n[e]===t})})(n,e)&&o(r,t))):t===e)},c.negate=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!n.apply(void 0,t)}},c.composeComparers=function(n,r){return function(t,e){return n(t,e)||r(t,e)}},c.keyComparer=function(o,i,u){var s=c.isString;return function(t,e){var t=o(t),e=o(e),n=null==t,r=null==e;return n&&r?0:n?i?-1:1:r?i?1:-1:s(t)&&s(e)?(n=u?t.localeCompare(e,u):t.localeCompare(e),i?-n:n):e<t?i?-1:1:t<e?i?1:-1:0}},c.calcNum=function(t,e){var n,r;return c.isNum(t)&&c.isNum(e)?(r=(n=c.calcMultiple(t,e)).mult,Number(((t*r+e*r)/r).toFixed(n.place))):0},c.calcNumDiv=function(t,e){return c.isNum(t)&&c.isNum(e)?t*(t=c.calcMultiple(t,e).mult)/(e*t):0},c.isNum=function(t){return"number"==typeof t&&!isNaN(t)},c.isString=function(t){return"string"==typeof t&&t.constructor===String},c.isArray=function(t){return Array.isArray(t)},c.calcMultiple=function(t,e){t=t.toString().split("."),e=e.toString().split("."),t=1<t.length?t[1].length:0,e=1<e.length?e[1].length:0;return{mult:Math.pow(10,Math.max(t,e)),place:e<=t?t:e}},c.arrayMap=function(t){return c.isArray(t)?t.map(function(t){return t}):t},c.cloneDeep=function(t){if("function"==typeof structuredClone)return structuredClone(t);var e;if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof RegExp)return e=t;if(t instanceof Array){for(var n in e=[],t)t.hasOwnProperty(n)&&e.push(c.cloneDeep(t[n]));return e}if(t instanceof Object){for(var n in e={},t)t.hasOwnProperty(n)&&(e[n]=c.cloneDeep(t[n]));return e}throw new Error("Unable to copy param! Its type isn't supported.")},c.getHash=function(t){function n(e){switch(Object.prototype.toString.call(e).slice(8,-1).toLowerCase()){case"object":Object.keys(e).sort().forEach(function(t){r+="".concat(t,":").concat(n(e[t]),";")});break;case"array":e.forEach(function(t){r+="".concat(n(t),",")});break;case"boolean":r+="boolean<>_<>_<>".concat(e.toString());break;case"null":r+="null<>_<>_<>";break;case"undefined":r+="undefined<>_<>_<>";break;default:r+=e?e.toString():""}return r}var r="";return n(t)},c})();"undefined"!=typeof window&&void 0!==window?window.Linq=Linq:(module.exports=Linq,module.exports.default=Linq);