"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Linq=function(){function u(t){this._elements=t=void 0===t?[]:t}return u.prototype.add=function(t){this._elements.push(t)},u.prototype.append=function(t){this.add(t)},u.prototype.prepend=function(t){this._elements.unshift(t)},u.prototype.addRange=function(t){var e;(e=this._elements).push.apply(e,t)},u.prototype.aggregate=function(t,e){return this._elements.reduce(t,e)},u.prototype.all=function(t){return this._elements.every(t)},u.prototype.any=function(t){return t?this._elements.some(t):0<this._elements.length},u.prototype.average=function(t){return Tools.calcNumDiv(this.sum(t),this.count())},u.prototype.cast=function(){return new u(this._elements)},u.prototype.clear=function(){this._elements.length=0},u.prototype.concat=function(t){return new u(this._elements.concat(t.toArray()))},u.prototype.contains=function(e){return this.any(function(t){return t===e})},u.prototype.count=function(t){return t?this.where(t).count():this._elements.length},u.prototype.defaultIfEmpty=function(t){return this.count()?this:new u([t])},u.prototype.distinct=function(){return this.where(function(e,t,n){return(Tools.isObject(e)?n.findIndex(function(t){return Tools.equal(t,e)}):n.indexOf(e))===t})},u.prototype.distinctBy=function(t){var r=this.groupBy(t);return new u(r).select(function(t){return t.key}).toArray().reduce(function(t,e){var n=new u(r).firstOrDefault(function(t){return Tools.equal(t.key,e)});return t.add(n.elements[0]),t},new u)},u.prototype.distinctMap=function(t){return(t?this.select(t):this).distinct()},u.prototype.elementAt=function(t){if(t<this.count()&&0<=t)return this._elements[t];throw new Error("ArgumentOutOfRangeException: index is less than 0 or greater than or equal to the number of elements in source.")},u.prototype.elementAtOrDefault=function(t){return t<this.count()&&0<=t?this._elements[t]:void 0},u.prototype.except=function(e){return this.where(function(t){return!e.contains(t)})},u.prototype.first=function(t){if(this.count())return t?this.where(t).first():this._elements[0];throw new Error("InvalidOperationException: The source sequence is empty.")},u.prototype.firstOrDefault=function(t){return this.count(t)?this.first(t):void 0},u.prototype.forEach=function(t){return this._elements.forEach(t)},u.prototype.groupBy=function(o,i){void 0===i&&(i=function(t){return t});return this.aggregate(function(t,e){var n=o(e),r=new u(t).firstOrDefault(function(t){return Tools.equal(t.key,n)}),e=i(e);return r?(r.elements.push(e),r.count++):t.push({key:n,count:1,elements:[e]}),t},[])},u.prototype.groupJoin=function(t,n,r,o){return this.select(function(e){return o(e,t.where(function(t){return n(e)===r(t)}))})},u.prototype.indexOf=function(t){return this._elements.indexOf(t)},u.prototype.insert=function(t,e){if(t<0||t>this._elements.length)throw new Error("Index is out of range.");this._elements.splice(t,0,e)},u.prototype.intersect=function(e){return this.where(function(t){return e.contains(t)})},u.prototype.join=function(t,n,r,o){return this.selectMany(function(e){return t.where(function(t){return r(t)===n(e)}).select(function(t){return o(e,t)})})},u.prototype.last=function(t){if(this.count())return t?this.where(t).last():this._elements[this.count()-1];throw Error("InvalidOperationException: The source sequence is empty.")},u.prototype.lastOrDefault=function(t){return this.count(t)?this.last(t):void 0},u.prototype.max=function(t){return Math.max.apply(Math,this._elements.map(t||function(t){return t}))},u.prototype.min=function(t){return Math.min.apply(Math,this._elements.map(t||function(t){return t}))},u.prototype.ofType=function(e){var n;switch(e){case Number:n="number";break;case String:n="string";break;case Boolean:n=typeof!0;break;case Function:n="function";break;default:n=null}return(null===n?this.where(function(t){return t instanceof e}):this.where(function(t){return typeof t===n})).cast()},u.prototype.orderBy=function(t,e){return void 0===e&&(e=Tools.keyComparer(t,!1)),new OrderedList(Tools.cloneDeep(this._elements),e)},u.prototype.orderByDescending=function(t,e){return void 0===e&&(e=Tools.keyComparer(t,!0)),new OrderedList(Tools.cloneDeep(this._elements),e)},u.prototype.thenBy=function(t){return this.orderBy(t)},u.prototype.thenByDescending=function(t){return this.orderByDescending(t)},u.prototype.remove=function(t){return-1!==this.indexOf(t)&&(this.removeAt(this.indexOf(t)),!0)},u.prototype.removeAll=function(t){return this.where(Tools.negate(t))},u.prototype.removeAt=function(t){this._elements.splice(t,1)},u.prototype.reverse=function(){return new u(this._elements.reverse())},u.prototype.select=function(t){return new u(this._elements.map(t))},u.prototype.selectMany=function(r){var o=this;return this.aggregate(function(t,e,n){return t.addRange(o.select(r).elementAt(n).toArray()),t},new u)},u.prototype.sequenceEqual=function(e){return this.all(function(t){return e.contains(t)})},u.prototype.single=function(t){if(1!==this.count(t))throw new Error("The collection does not contain exactly one element.");return this.first(t)},u.prototype.singleOrDefault=function(t){return this.count(t)?this.single(t):void 0},u.prototype.skip=function(t){return new u(this._elements.slice(Math.max(0,t)))},u.prototype.skipLast=function(t){return new u(this._elements.slice(0,-Math.max(0,t)))},u.prototype.skipWhile=function(e){var n=this;return this.skip(this.aggregate(function(t){return e(n.elementAt(t))?++t:t},0))},u.prototype.sum=function(t){return t?this.select(t).sum():this.aggregate(function(t,e){return Tools.calcNum(t,+e)},0)},u.prototype.take=function(t){return new u(this._elements.slice(0,Math.max(0,t)))},u.prototype.takeLast=function(t){return new u(this._elements.slice(-Math.max(0,t)))},u.prototype.takeWhile=function(e){var n=this;return this.take(this.aggregate(function(t){return e(n.elementAt(t))?++t:t},0))},u.prototype.toArray=function(){return this._elements},u.prototype.toDictionary=function(r,o){var i=this;return this.aggregate(function(t,e,n){return t[i.select(r).elementAt(n).toString()]=o?i.select(o).elementAt(n):e,t.add({Key:i.select(r).elementAt(n),Value:o?i.select(o).elementAt(n):e}),t},new u)},u.prototype.toList=function(){return this},u.prototype.toLookup=function(t,e){return this.groupBy(t,e)},u.prototype.union=function(t){return this.concat(t).distinct()},u.prototype.where=function(t){return new u(this._elements.filter(t))},u.prototype.zip=function(n,r){var o=this;return n.count()<this.count()?n.select(function(t,e){return r(o.elementAt(e),t)}):this.select(function(t,e){return r(t,n.elementAt(e))})},u}(),OrderedList=function(n){function e(t,e){t=n.call(this,t)||this;return t._comparer=e,t._elements.sort(t._comparer),t}return((e.prototype=Object.create(n.prototype)).constructor=e).prototype.thenBy=function(t){return new e(this._elements,Tools.composeComparers(this._comparer,Tools.keyComparer(t,!1)))},e.prototype.thenByDescending=function(t){return new e(this._elements,Tools.composeComparers(this._comparer,Tools.keyComparer(t,!0)))},e}(Linq),Tools=function(){function u(){}var i=u;return u.isObject=function(t){return!!t&&"object"==typeof t},u.equal=function(t,e){var n,r,o;return t===e||typeof t==typeof e&&(i.isObject(t)&&i.isObject(e)?(n=[t,e].map(function(t){return t.constructor}))[0]===n[1]&&(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():t instanceof RegExp&&e instanceof RegExp?t.toString()===e.toString():(n=Object.entries(t),r=Object.entries(e),n.length===r.length&&(o=function(t,n){return t.every(function(t){var e=t[0],t=t[1];return u.isObject(t)?u.equal(n[e],t):n[e]===t})})(n,e)&&o(r,t))):t===e)},u.negate=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!n.apply(void 0,t)}},u.composeComparers=function(n,r){return function(t,e){return n(t,e)||r(t,e)}},u.keyComparer=function(o,i){return function(t,e){var n,r,t=o(t),e=o(e);return u.isString(t)&&u.isString(e)?(r=e,0<(n=t).localeCompare(r)?i?-1:1:0<r.localeCompare(n)?i?1:-1:0):(r=e)<(n=t)?i?-1:1:n<r?i?1:-1:0}},u.calcNum=function(t,e){var n,r;return u.isNum(t)&&u.isNum(e)?(n=(r=u.calcMultiple(t,e)).mult,r=r.place,Number(((t*n+e*n)/n).toFixed(r))):0},u.calcNumDiv=function(t,e){return t/e},u.isNum=function(t){return"number"==typeof t&&!isNaN(t)},u.isString=function(t){return"string"==typeof t&&t.constructor===String},u.calcMultiple=function(t,e){t=t.toString().split("."),e=e.toString().split("."),t=1<t.length?t[1].length:0,e=1<e.length?e[1].length:0;return{mult:Math.pow(10,Math.max(t,e)),place:e<=t?t:e}},u.cloneDeep=function(t){if("function"==typeof structuredClone)return structuredClone(t);var e;if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof RegExp)return e=t;if(t instanceof Array){for(var n in e=[],t)e.push(u.cloneDeep(t[n]));return e}if(t instanceof Object){for(var n in e={},t)t.hasOwnProperty(n)&&(e[n]=u.cloneDeep(t[n]));return e}throw new Error("Unable to copy param! Its type isn't supported.")},u}();"undefined"!=typeof module?(exports="undefined"!=typeof exports?module.exports=Linq:exports).Linq=Linq:window.Linq=Linq;